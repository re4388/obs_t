
[[message_queue_idx]]

---


什么场景下你会在两个系统中采用异步通信机制？

异步通信机制在许多场景中都非常有用，下面情境可以思考一下是否適合


### 1. 需要高併發且可以等 (如果不可以等，那就可能不適合用 async)

- **场景**：当系统需要处理大量并发请求时，异步通信可以有效地减少阻塞，允许系统同时处理多个请求。
- **示例**：Web 应用程序在处理用户请求时，可以将请求异步发送到后端服务，允许用户继续与界面交互，而不必等待所有请求完成。

see [notion what is Node.js non-blocking IO](https://www.notion.so/nture4388/what-is-Node-js-non-blocking-IO-8d3d2869c0004cb0bd38aeaaecfab283?pvs=4)

### 2. **解耦系统组件** (建議從 domain 或是 use case 去思考是否適合 event, or async)

- **场景**：在微服务架构中，各个服务之间需要相互通信。使用异步通信可以降低服务之间的耦合度，使得服务可以独立扩展和部署。
- **示例**：一个电商平台的订单服务可以异步发送订单创建事件到库存服务和支付服务，允许这些服务独立处理订单。

### 3. **提高系统的响应性** (類似 AI訓練，基本上一定是非同步，好了再跟你說)

- **场景**：在用户界面（UI）应用中，异步通信可以提高用户体验，避免界面冻结。
- **示例**：在移动应用中，用户提交表单后，可以异步发送请求到服务器，用户可以继续浏览应用，而不必等待服务器响应。

### 4. **处理长时间运行的任务** (類似 AI訓練，基本上一定是非同步，好了再跟你說)

- **场景**：某些操作可能需要较长时间才能完成（如数据处理、文件上传等），使用异步通信可以避免阻塞主线程。
- **示例**：用户上传大文件时，可以将上传请求异步处理，并在上传完成后通过通知或回调告知用户。

### 5. **事件驱动架构**

- **场景**：在事件驱动架构中，系统通过事件进行通信，异步机制可以有效地处理事件流。
- **示例**：在 IoT 系统中，设备可以异步发送传感器数据到云端，云端可以根据数据触发相应的处理逻辑。

like wemo return 裡面和 update-box-msg 裡面，很多邏輯可以抽出去使用事件驅動

### 6. **负载均衡和流量控制**

- **场景**：在高流量的系统中，异步通信可以帮助平衡负载，避免系统过载。
- **示例**：使用消息队列（如 RabbitMQ、Kafka）来缓冲请求，允许后端服务根据自身能力逐步处理请求。

see [[message_queue_idx]]

### 7. **跨系统集成**

- **场景**：在需要与外部系统或服务集成时，异步通信可以提高系统的灵活性和可扩展性。
- **示例**：在支付系统中，支付请求可以异步发送到支付网关，系统可以继续处理其他业务逻辑，而不必等待支付结果。

### 8. **数据同步和备份**

- **场景**：在需要进行数据同步或备份的场景中，异步通信可以减少对主业务流程的影响。
- **示例**：在数据库备份过程中，可以异步将数据备份到云存储，而不影响用户的正常操作。

### 总结

异步通信机制在许多场景中都能显著提高系统的性能、可扩展性和用户体验。选择使用异步通信时，需要考虑系统的架构、业务需求和技术栈，以确保实现的有效性和可靠性。
