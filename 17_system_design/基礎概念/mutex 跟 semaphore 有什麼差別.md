這兩個概念比較是底層實作, like OS 會需要了解的

---

### 1. 定义

- **Mutex（互斥锁）**：
    - 互斥锁是一种用于保护共享资源的同步机制，确保在同一时间只有一个线程可以访问该资源。
    - 互斥锁通常由一个线程锁定（获取），并在使用完资源后解锁（释放）。
- **Semaphore（信号量）**：
    - 信号量是一种更通用的同步机制，可以控制对共享资源的访问数量。
    - 信号量维护一个计数值，该计数值表示可用资源的数量。线程可以通过增加或减少信号量的计数值来请求或释放资源。

### 2. 计数

- **Mutex**：
    - **互斥锁的计数值只能是 0 或 1**。一个线程可以锁定互斥锁，其他线程在该锁被释放之前无法访问该资源。
- **Semaphore**：
    - **信号量的计数值可以是任意非负整数。这个计数值表示可以同时访问共享资源的线程数量**。例如，如果信号量的值为 3，则最多可以有 3 个线程同时访问该资源。

### 3. 拥有者

- **Mutex**：
    
    - 互斥锁有一个 “拥有者” 线程。只有锁定该互斥锁的线程可以解锁它。这样可以防止错误的解锁操作。
- **Semaphore**：
    
    - 信号量没有 “拥有者” 的概念。任何线程都可以增加或减少信号量的计数值，无论它是否是当前正在使用资源的线程。

### 4. 使用场景

- **Mutex**：
    
    - 适用于需要保护共享资源的场景，确保同一时间只有一个线程可以访问该资源。例如，保护对共享变量的访问。
- **Semaphore**：
    
    - 适用于控制对资源池的访问，例如限制对数据库连接池或线程池的访问。信号量可以用来控制同时访问的线程数量。

### 5. 性能

- **Mutex**：
    
    - 由于互斥锁通常是二进制的（锁定或未锁定），它们在某些情况下可能比信号量更轻量级。
- **Semaphore**：
    
    - 信号量可能涉及更多的开销，尤其是在高并发的场景中，因为它需要管理计数值。

### 总结

- **互斥锁（Mutex）** 是一种用于保护共享资源的工具，确保同一时间只有一个线程可以访问该资源。
- **信号量（Semaphore）** 是一种更灵活的工具，可以控制对多个资源的访问，允许多个线程同时访问共享资源，具体数量由信号量的计数值决定。

在选择使用哪种同步机制时，开发者需要根据具体的应用场景和需求来决定使用互斥锁还是信号量。