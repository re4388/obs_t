
### Redis Pub Sub
- 如果沒有消息持久性需求 → redis pubsub就夠了，學習成本也低
    - 沒有消息持久性需求 → redis 是 in-memory db (有持久機制，但不是他的強項)
- 有持久性區需求 + 高吞吐 → kafka

## RabbitMQ
- 基於 AMQP (註一) <-> kafka 就沒這個，差很多
- RabbitMQ 提供了多種交換器類型（如 direct、topic、fanout 和 headers），使得消息路由更加靈活
- qos 0,1,2
- 支持消息持久化和高可用性配置，確保系統在故障時能夠快速恢復。
- 通過鏡像隊列來實現高可用性，消息會被複製到集群中的多個節點
- 性能：單節點吞吐量通常較低，但適合即時消息傳遞
- RabbitMQ 更加適合需要可靠消息傳遞和靈活路由的即時性應用，如訂單處理和通知系統。
- Apache Kafka 則適合處理大規模數據流和實時數據處理的應用，如日誌收集和數據分析。
- use case
	- 適合於需要消息確認和重新發送的情況，如訂單處理、通知系統等。
	- 適合需要複雜路由和多種消費者模式的情況。
	- 適合需要即時性較強的應用


see [[kafka_intro]]



註一
AMQP（Advanced Message Queuing Protocol，高級訊息佇列協議）是一種開放標準的應用層協議，用於面向訊息的中間件。在訊息佇列系統的上下文中，AMQP 提供了一個平台中立的訊息傳遞機制，允許不同廠商的應用程式和系統之間進行可靠的異步通訊。

AMQP（Advanced Message Queuing Protocol，高級訊息佇列協議）是一種開放標準的應用層協議，用於面向訊息的中間件。在訊息佇列系統的上下文中，AMQP 提供了一個平台中立的訊息傳遞機制，允許不同廠商的應用程式和系統之間進行可靠的異步通訊。

**AMQP 的核心概念：**
* **訊息 (Message):**  要傳遞的數據單元，包含有效負載 (payload) 和標籤 (label)。
* **發佈者 (Publisher):**  創建並發送訊息的應用程式。
* **交換器 (Exchange):**  接收來自發佈者的訊息，並根據路由規則將訊息路由到相應的訊息佇列。
* **訊息佇列 (Queue):**  儲存訊息的緩衝區，直到消費者接收它們。
* **綁定 (Binding):**  定義交換器和訊息佇列之間的關係，以及訊息路由規則。
* **消費者 (Consumer):**  從訊息佇列接收訊息的應用程式。
* **虛擬主機 (Virtual Host):**  提供邏輯分組和隔離，允許在同一個訊息代理上運行多個獨立的訊息佇列系統。


**AMQP 的工作流程：**
1. 發佈者將訊息發送到交換器。
2. 交換器根據訊息的標籤和綁定規則，將訊息路由到一個或多個訊息佇列。
3. 消費者從訊息佇列接收訊息。


**AMQP 的優點：**
* **平台中立性：**  AMQP 是一個開放標準，允許不同廠商的應用程式和系統之間進行互操作。
* **可靠性：**  AMQP 提供了訊息確認和持久化機制，確保訊息的可靠傳遞。
* **靈活性：**  AMQP 支援多種訊息傳遞模式，例如點對點、發佈/訂閱和請求/回覆。
* **互操作性：**  AMQP 允許使用不同程式語言和平台開發的應用程式之間進行通訊。
* **可擴展性：**  AMQP 支援分散式部署，可以處理大量的訊息流量。


**AMQP 的應用場景：**
* **分散式系統：**  在分散式系統中，AMQP 可以用於解耦應用程式和服務，提高系統的可靠性和可擴展性。
* **微服務架構：**  AMQP 可以用於微服務之間的通訊，實現服務之間的鬆散耦合。
* **電子商務：**  AMQP 可以用於處理訂單、支付和物流等業務流程。
* **物聯網：**  AMQP 可以用於收集和處理來自物聯網設備的數據。


**AMQP 的實現：**
* RabbitMQ
* Apache ActiveMQ
* Apache Qpid


**與其他訊息佇列協議的比較：**
* **JMS (Java Message Service):**  JMS 是 Java 平台的訊息傳遞 API，而 AMQP 是一個平台中立的協議。
* **MQTT (Message Queuing Telemetry Transport):**  MQTT 是一個輕量級的訊息傳遞協議，主要用於物聯網應用。


總之，AMQP 是一個功能強大且靈活的訊息佇列協議，它提供了可靠的異步通訊機制，並支援多種訊息傳遞模式。  在構建分散式系統和微服務架構時，AMQP 是一個值得考慮的選擇。

