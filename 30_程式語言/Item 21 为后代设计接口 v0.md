Design interfaces for posterity


许多新的默认方法被添加到 Java 8 的核心集合接口中，主要是为了方便使用 lambda 表达式(第 6 章)。 

Java 类库的默认方法是高质量的通用实现，在大多数情况下，它们工作正常。 但是，编写一个默认方法并不总是可能的，它保留了每个可能的实现的所有不变量。(這句話是說，總會有出現一些實現會和默認方法衝突)


Apache 的 类仍然在积极维护，但在撰写本文时，并未重写 removeIf 方法。 如 这个类与 Java 8 一起使用，它将继承的默认实现，但实际上不能保持类的基本承诺:自动同步每个方法调用。 因為默认实现对同步一无所知，并且不能访问包含锁定对象的属性。 如果客户端在另一个线程同时修改集合的 情况下调用 实例上的 removeIf 方法，则可能会导致 `ConcurrentModificationException` 异常或其他未指定的行为。


应该避免使用默认方法向现有的接口添加新的方法，除非这个需要是关键的，在这种情况下，你应该仔细考虑， 以确定现有的接口实现是否会被默认的方法实现所破坏。

然而，默认方法对于在创建接口时提供标准的方法实现非常有用，以减轻实现接口的任务(条目 20)。