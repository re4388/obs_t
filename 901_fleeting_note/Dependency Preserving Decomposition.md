當設計資料庫模式時，Dependency Preserving Decomposition（依賴關係保留分解）是一個重要的概念。了解這一概念有助於在進行規範化時，保留資料的完整性和一致性。

### Dependency Preserving Decomposition 介紹

**Dependency Preserving Decomposition** 是指在對資料庫中的關係進行分解時，能夠保留所有的函數依賴關係（Functional Dependencies，簡稱 FDs）。這樣即使原本的表格被拆分成多個子表，每個子表中的數據依然能夠保持完整性，而無需回到原始的表格進行驗證。

### 為何重要？

1. **資料完整性**：如果在分解過程中丟失了函數依賴關係，那麼某些資料約束就無法在新的子表中被直接驗證出來。需要合併後才能判斷會增加運算複雜度。
2. **性能**：保留依賴關係能減少在查詢時進行冗長的聯結操作（JOIN）。由於依賴約束已被直接保留在新的分解表中，不需進行額外的整合操作來檢查完整性。

### 如何進行 Dependency Preserving Decomposition？

在對資料表進行分解時，可以按照以下步驟：

1. **找尋函數依賴**：首先要識別出在原始資料表中的所有函數依賴關係（Functional Dependencies，簡稱 FDs）。

2. **分解表格**：使用規範化技術（如 Boyce-Codd Normal Form，BCNF，或 Third Normal Form，3NF），將原始表格分解成多個較小的表格，以消除不必要的冗餘和異常。

3. **驗證依賴保留**：
   - 確保每個原始函數依賴關係中的屬性（attributes）仍存在於分解後的某個子表中，並且在該子表中能夠檢查這些依賴關係是否依然成立。
   - 如果某一個函數依賴關係在分解後不能在任意一個單一子表中被驗證，則表示該分解未能保存依賴關係，可能需要重新考慮分解方式，或嘗試不同的分解方法。

### 簡單例子

假設有一個關係 R(A, B, C) 和以下的函數依賴關係：
1. A -> B
2. B -> C

要進行分解：

1. 找出函數依賴：
   - A -> B
   - B -> C

2. 進行 BCNF 或 3NF 分解，可能產生兩個表：
   - R1(A, B)
   - R2(B, C)

3. 驗證依賴保留：
   - 在表 R1 中，可以直接驗證 A -> B。
   - 在表 R2 中，可以直接驗證 B -> C。

  因此，這樣一個分解保留了原本所有的函數依賴關係，是一個依賴保留分解。

透過依賴保留分解，我們能在保持資料庫規範化的同時，確保資料的完整性和一致性，且維持高效的查詢性能。